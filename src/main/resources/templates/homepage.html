<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>柠檬博客-主页</title>
    <link th:href="@{/default/css/styles.css}" rel="stylesheet">
    <link th:href="@{/default/css/zzsc.css}" rel="stylesheet">
    <script type="text/javascript" th:src="@{/default/js/jquery.min.js}"></script>
    <link th:href="@{/layui/css/layui.css}" rel="stylesheet">
    <!-- 开发环境版本，包含了有帮助的命令行警告 -->
    <script type="text/javascript" th:src="@{/default/js/vue.js}"></script>
    <!--ajax请求需要引入的    -->
    <script type="text/javascript" src="https://cdn.bootcss.com/vue-resource/1.5.1/vue-resource.min.js"></script>
</head>
<body>
<header style="position: fixed;left: 0;top: 0;z-index: 1000">
    <nav id="nav">
        <ul>
            <li><a href="/">网站首页</a></li>
            <li><a href="/user/dataPage" target="_blank">博客资料</a></li>
            <li><a href="#" target="_blank">问答专区</a></li>
            <li><a  target="_blank" id="release">发布帖子</a></li>
            <li><a href="#" target="_blank">充值专区</a></li>
            <li><a href="#" target="_blank">说说专区</a></li>
            <li><a href="#" target="_blank">自助系统</a></li>
            <li><a href="#" target="_blank">用户专区</a></li>
            <li><a href="#" target="_blank">关于我们</a></li>
        </ul>
    </nav>
</header>
<div class="mainContent">
    <aside>
        <div class="avatar">
            <a href="#"><span class="username" id="name">青轻飞扬</span></a>
        </div>
        <section class="topspaceinfo">
            <p class="syay">于千万人之中，我遇见了我所遇见的人....</p>
        </section>

        <section class="taglist" style="height:700px;">
            <div id="navOut">
                <div class="nav">
                    <div class="navLeft">
                        <p>帖子分类</p>
                        <div class="fenlei">
                            <ul id="ulId">
                                <li v-for="item in listZi">
                                    <dl class="fenleiLeft">
                                        <dt>{{item.sortArticleName}}</dt>
                                        <dd>
                                            <a v-for="itemZi in list" v-if="item.sortArticleId==itemZi.sortId" href="http://www.jq22.com">{{itemZi.ziName}}</a>
                                        </dd>
                                    </dl>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div id="banner">
            </div>
        </section>
    </aside>
    <div class="blogitem">
        <article>
            <h2 class="title"><a href="/">陌上花开，可缓缓归矣</a></h2>
            <ul class="text">
                <p>“陌上花开，可缓缓归矣。” 含义：（夫人），田间阡陌上的花开了，你可以一边赏花，一边慢慢地回来。</p>
                <p>“陌上花开，如果没有悄然伫立阡陌并为陌上风情所陶醉的人，那么花开也寂寞，风情也苍白....”喜欢这句话，是因为看了忍冬的作品《陌上花开缓缓归》</p>
                <p>阳春三月，风和日暖，信步城外，看阡陌之上的杨柳依依，野花绚烂，身心不由得轻爽而浪漫。“三月风情陌上花”，古远的诗句似乎随风从天边飘来，从历史的深处飘来，拂过阡陌，袭上心头，诗是属于清乾嘉诗人赵翼的，可昂首远望，眼前的陌上风情却是不折不扣的现代，由眼帘入心扉。</p>
                <p class="textimg"><img th:src="@{/default/img/text02.jpg}"></p>
                <p>漫步陌上，心情是诗意的那种，优雅而散淡，不惹匆促，只因陌上花开；花是自然的那种，朴素而恬淡，不落尘俗。“三月风情陌上花”，是花在其中生命得以璀璨，人在其中心情得以畅然的一种意境。三月陌上花，让人爱让人痴，恍惚人的骨子里头都沉淀了花的影子，花的风韵。</p>
                <p>陌上花开，如果没有了从俗累的生活中走出来，悄然伫立阡陌并为陌上风情所陶醉的人，那么花开也寂寞，风情也苍白。于是，一句“陌上花开，可缓缓归矣”不知被多少人吟诵了多少遍。人归缓缓，那花便有灵性，便开得执著，陌上风情也被撩拨得浓郁而热烈。</p>
                <p>缓缓归，缓缓归，披一袭“三月风情”，再采一束“陌上花”，缓缓归。</p>
                <p>缓缓归矣，我心已是陌上花开。</p>
            </ul>
            <div class="textfoot">
                <p style="float:left;">发布人：</p><p style="float:left" >野猪哥</p> <p style="display: inline-block">发布时间：</p><p style="display: inline">2019-02-06</p> <a href="/">查看人数(6)</a><a href="/">评论</a>
            </div>
        </article>
        <div class="pages"><span>1</span><a href="/" hidefocus="">2</a><a href="/" hidefocus="">3</a><a href="/" class="next">下一页&gt;&gt;</a></div>
    </div>
</div>
<footer>
    <div class="footavatar">
        <img th:src="@{/default/img/photo.jpg}" class="footphoto">
        <ul class="footinfo">
            <p class="fname"><a class="username" href="/dancesmile">青轻飞扬</a>  </p>
            <p class="finfo sex">性别：女</p>
            <p class="address">现居：四川成都</p></ul>
    </div>
    <div class="Copyright">
        <ul>
            <a href="/">帮助中心</a><a href="/">空间客服</a><a href="/">投诉中心</a><a href="/">空间协议</a>
        </ul>
        <p>Design by DanceSmile</p>
    </div>
</footer>
</body>
<script type="text/javascript" th:src="@{/layer/layer.js}"></script>
<script type="text/javascript" th:src="@{/layui/layui.all.js}"></script>
<script type="text/javascript" th:src="@{/default/js/yido.js}"></script>
<script th:inline="javascript">
    function getNowFormatDate() {//获取当前时间
        var date = new Date();
        var seperator1 = "-";
        var seperator2 = ":";
        var month = date.getMonth() + 1<10? "0"+(date.getMonth() + 1):date.getMonth() + 1;
        var strDate = date.getDate()<10? "0" + date.getDate():date.getDate();
        var currentdate = date.getFullYear() + seperator1  + month  + seperator1  + strDate
            + " "  + date.getHours()  + seperator2  + date.getMinutes()
            + seperator2 + date.getSeconds();
        return currentdate;
    }
    //用户数据
    var user=[[${session.user}]];
    $(".footphoto").attr("src",user.userImageUrl);
    $(".username").html(user.userUserName);
    $(".sex").html("性别:"+user.userSex);
    $(".syay").html(user.userSays);
    $(".avatar a").css("background-image","url('"+user.userImageUrl+"')");

    //ip地址
    var information=[[${session.information}]];
    var json = eval('(' + information + ')');
    $(".address").html("现居地址:"+json.data.region+"省"+json.data.city+"市");
    //边缘弹出
    layer.open({
        type: 1
        ,offset: 'rb' //具体配置参考：offset参数项
        ,content: '<div style="height: 110px;width: 305px">' +
            '<center>' +
            '<div id="ip"></div><br>' +
            '<div id="address"></div><br>' +
            '<div id="time"></div><br>' +
            '</center>' +
            '</div>'
        ,btn: '关闭'
        ,title:'登录信息'
        ,btnAlign: 'c' //按钮居中
        ,shade: 0 //不显示遮罩
        ,yes: function(){
            layer.closeAll();
        }
    });
    $("#ip").html("登陆IP:"+json.data.ip);
    $("#address").html("登陆地址:"+json.data.region+"省"+json.data.city+"市");
    $("#time").html("登录时间:"+getNowFormatDate());
</script>
<script>
    //创建vue对象,并绑定d1区域，将数据渲染到dom
    var vue= new Vue({
        el:'#ulId',
        data:{
            "list":[],
            "listZi":[]
        },
        created(){  //当 vm 实例 的data ，methods 初始化完毕后，vm实例会自动执行created这个生命周期
            this.getAllList();
            this.getAllZiList();
        },
        methods:{
            getAllList(){
                this.$http.get('http://localhost:8080/articleSort/getAll').then(result => {
                    var result=result.body;
                    if (result.status==100){
                        this.list=result.list;
                    }else{
                        alert("获取失败！！！")
                    }
                    //等vue渲染完之后0.2秒在调用js，才可以获取用vue渲染的元素
                    setTimeout("getDa()",200);
                });
            },
            getAllZiList(){
                this.$http.get('http://localhost:8080/articleSort/getZi').then(result =>{
                    var result=result.body;
                    if (result.status==100){
                        this.listZi=result.list;
                    }else{
                        alert("获取失败！！！")
                    }
                    //等vue渲染完之后0.2秒在调用js，才可以获取用vue渲染的元素
                    setTimeout("getDa()",200);
                });
            }
        }
    });
    console.log(vue)
</script>
<script type="text/javascript">
    $("#release").click(function () {
        $.ajax({
            url:"/articleSort/getZi",
            dataType:"json",
            success:function (data) {
                for (var i=0;i<data.list.length;i++){
                    var fenlei="<option value='"+data.list[i].sortArticleId+"'>"+data.list[i].sortArticleName+"</option>";
                    $("#fenlei").append(fenlei);
                }
            },
            error:function () {
                alert("请求错误!!!")
            }

        });
       var name= $("#name").html();
        layer.open({
            title:"发布帖子",
            type: 1,
            area: ['700px', '90%'],
            content: '<form class="layui-form" action="" style="margin: 40px;">\n' +
                '  <div class="layui-form-item">\n' +
                '    <label class="layui-form-label">文章标题</label>\n' +
                '    <div class="layui-input-block">\n' +
                '      <input type="text" name="title" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">\n' +
                '    </div>\n' +
                '  </div>\n' +
                '  <div class="layui-form-item">\n' +
                '    <label class="layui-form-label">发布人</label>\n' +
                '    <div class="layui-input-block">\n' +
                '      <input disabled type="text" name="title"  lay-verify="required" autocomplete="off" class="layui-input" value="'+name+'">\n' +
                '    </div>\n' +
                '  </div>\n' +
                '  <div class="layui-form-item">\n' +
                '    <label class="layui-form-label">分类</label>\n' +
                '    <div class="layui-input-block">\n' +
                '      <select name="city" lay-verify="required" id="fenlei" >\n' +
                '      </select>\n' +
                '    </div>\n' +
                '  </div>\n' +
                '  <div class="layui-form-item">\n' +
                '    <label class="layui-form-label">子分类</label>\n' +
                '    <div class="layui-input-block">\n' +
                '      <select name="city" lay-verify="required">\n' +
                '        <option value=""></option>\n' +
                '        <option value="0">北京</option>\n' +
                '        <option value="1">上海</option>\n' +
                '        <option value="2">广州</option>\n' +
                '        <option value="3">深圳</option>\n' +
                '        <option value="4">杭州</option>\n' +
                '      </select>\n' +
                '    </div>\n' +
                '  </div>\n' +
                '  <div class="layui-form-item layui-form-text">\n' +
                '    <label class="layui-form-label">文章内容</label>\n' +
                '    <div class="layui-input-block">\n' +
                '      <textarea name="desc" placeholder="请输入内容" class="layui-textarea"></textarea>\n' +
                '    </div>\n' +
                '  </div>\n' +
                '  <div class="layui-form-item">\n' +
                '    <div class="layui-input-block">\n' +
                '      <button class="layui-btn" lay-submit lay-filter="formDemo">立即提交</button>\n' +
                '      <button type="reset" class="layui-btn layui-btn-primary">重置</button>\n' +
                '    </div>\n' +
                '  </div>\n' +
                '</form>'//这里content是一个普通的String
        });
    });
</script>
</html>